<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<section id="menu">

    <h3>{{ "itemList.filter" | translate }}</h3>

    <div>
        <mat-form-field>
            <mat-label>{{ "orderList.orderName" | translate }}</mat-label>
            <input matInput (keyup)="applyFilter()" #inputOrderName>
        </mat-form-field>
        <mat-form-field>
            <mat-label>{{ "orderList.clientName" | translate }}</mat-label>
            <input matInput (keyup)="applyFilter()" placeholder="{{ 'itemList.nameExample' | translate }}" #inputClientName>
        </mat-form-field>
        <mat-form-field>
            <mat-label>{{ "orderList.constructionSiteName" | translate }}</mat-label>
            <input matInput min="0" (keyup)="applyFilter()" #inputConstructionSiteName>
        </mat-form-field>
        <mat-form-field>
            <mat-label>{{ "orderList.status" | translate }}</mat-label>
            <mat-select #inputStatus (selectionChange)="applyFilter($event.value)">
              
                <mat-option value="" >{{ 'orderList.statusAll' | translate }}</mat-option>
                <mat-option value="1">{{ 'orderList.statusActive' | translate }}</mat-option>
                <mat-option value="0">{{ 'orderList.statusInactive' | translate }}</mat-option>
              
            </mat-select>
        </mat-form-field>
    </div>


</section>

<section class="right-panel">


    <div class="inner-right-panel">

        <h3>{{ "headerTabs.orders.orderList" | translate }}:</h3>

        <h3 *ngIf="isLoaded && orders_count==0" class="errorHeader">{{ "orderList.errors.ordersNotFound" | translate }}</h3>


        <table #order_table *ngIf="isLoaded && orders_count>0" mat-table [dataSource]="order_list" matSort matSortActive="order_name" matSortDirection="asc" matSortDisableClear>


            <ng-container matColumnDef="order_name">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>{{ "orderList.orderName" | translate }}</th>
                <td routerLink="/manage-mate/order/{{order.id}}" mat-cell *matCellDef="let order">{{order.order_name}}</td>
            </ng-container>

            <ng-container matColumnDef="client_name">
                <th mat-header-cell *matHeaderCellDef mat-sort-header >{{ "orderList.clientName" | translate }}</th>
                <td routerLink="/manage-mate/order/{{order.id}}" mat-cell *matCellDef="let order">{{order.client_name}}</td>
            </ng-container>

            <ng-container matColumnDef="construction_site_name">
                <th mat-header-cell *matHeaderCellDef mat-sort-header >{{ "orderList.constructionSiteName" | translate }}</th>
                <td routerLink="/manage-mate/order/{{order.id}}" mat-cell *matCellDef="let order">{{order.construction_site_name}}</td>
            </ng-container>

            <ng-container matColumnDef="status">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>{{ "orderList.status" | translate }}</th>
                <td routerLink="/manage-mate/order/{{order.id}}" mat-cell *matCellDef="let order" [class.color-green]="order.status==1" [class.color-red]="order.status==0">

                    @if(order.status == 0){
                        {{ "orderList.statusInactive" | translate }}
                    }
                    @else {
                        {{ "orderList.statusActive" | translate }}
                    }                    

                </td>
            </ng-container>

            <ng-container matColumnDef="creation_date">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>{{ "orderList.creationDate" | translate }}</th>
                <td routerLink="/manage-mate/order/{{order.id}}" mat-cell *matCellDef="let order">{{this.dateHandler.formatDate(order.creation_date)}}</td>
            </ng-container>



            



            <ng-container matColumnDef="edit">
                <th mat-header-cell *matHeaderCellDef>{{ "itemList.edit" | translate }}</th>
                <td mat-cell *matCellDef="let order">
                    <a routerLink="/manage-mate/order-edit/{{order.id}}">
                        <mat-icon class="edit">edit</mat-icon>
                        {{ "itemList.edit" | translate }}
                    </a>
                </td>
            </ng-container>

            <ng-container matColumnDef="delete">
                <th mat-header-cell *matHeaderCellDef>{{ "itemList.delete" | translate }}</th>
                <td mat-cell *matCellDef="let order">
                    <button mat-raised-button (click)="openDialog('100ms', '100ms', order.id, order.order_name)">
                        <mat-icon class="delete">delete</mat-icon>
                        {{ "itemList.delete" | translate }}
                    </button>
                </td>
            </ng-container>

            <tr class="table-header" mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
            <tr mat-row *matRowDef="let myRowData; columns: columnsToDisplay"></tr>
      
    
        </table>

        <div *ngIf="!isLoaded" class="loader-container">
            
            <div class="loader"></div>

        </div>
        

    </div>

    <div class="inner-right-panel-1">

        <!-- (page)="pageLoad($event)"
            [pageSize]="120"
            [hidePageSize]="false"
            [length]="1000"
            [disabled]="false"
            [pageIndex]="page"
            [showFirstLastButtons]="false"
        -->
        <mat-paginator #pageNum
               showFirstLastButtons
               [pageSizeOptions]="[30, 60, 120, 240]"
               aria-label="Select page">
        </mat-paginator>

    </div>

</section>

